{{ define "main" }}
<main>
    <div class="bg-gray-200 dark:bg-gray-900">
        <div class="px-4 py-8 mx-auto max-w-screen-xl">
            <div class="grid gap-8 items-center mb-8 sm:mb-0 lg:gap-12 lg:grid-cols-12">
                <div class="col-span-6 px-4 text-center sm:mb-6 lg:text-left lg:mb-0">
                    <h1 class="mb-2 text-4xl font-extrabold tracking-normal leading-none md:text-5xl xl:text-6xl text-primary-400">
                        {{ .Site.Params.Moto }}
                    </h1>
                    <p class="mx-auto mb-6 max-w-xl font-normal text-gray-50 lg:mx-0 xl:mb-2 md:text-lg xl:text-xl dark:text-gray-50">
                        {{ .Site.Params.Description}}
                    </p>
                    {{ with .Site.Params.TicketURL }}
                    <div class="mt-6">
                        <a href="{{ . }}"
                          class="inline-flex items-center px-8 py-3 text-lg font-regular text-white bg-primary-400 rounded-full shadow-md hover:bg-primary-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-primary-400 transition-colors">
                           Tickets
                        </a>
                    </div>
                    {{ end }}
                </div>
                <div class="col-span-6">
                    <div class="mx-auto w-full max-w-sm sm:max-w-md lg:max-w-lg hero-container">
                        {{/* Use Hugo's image processing for optimized responsive images */}}
                        {{ $heroImage := resources.Get .Site.Params.Hero.Image }}
                        {{ if $heroImage }}
                            {{ $heroWebP := $heroImage.Resize "576x576 webp q85" }}
                            {{ $heroWebPSmall := $heroImage.Resize "320x320 webp q85" }}
                            <img 
                                src="{{ $heroWebP.RelPermalink }}" 
                                srcset="{{ $heroWebPSmall.RelPermalink }} 320w, {{ $heroWebP.RelPermalink }} 576w"
                                sizes="(max-width: 640px) 320px, 576px"
                                alt="{{ .Site.Params.Hero.Alt }}" 
                                class="overflow-hidden mx-auto rounded-2xl shadow-xl hero-image"
                                width="576" 
                                height="576"
                                loading="eager"
                                fetchpriority="high" />
                        {{ else }}
                            {{/* Fallback to static image */}}
                            <img 
                                src="/images/hero.webp" 
                                alt="{{ .Site.Params.Hero.Alt }}" 
                                class="overflow-hidden mx-auto rounded-2xl shadow-xl hero-image"
                                width="576" 
                                height="576"
                                loading="eager"
                                fetchpriority="high" />
                        {{ end }}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- More main page content here... -->

    <!-- Our mission section -->
    <div class="py-12 px-4 text-center max-w-3xl mx-auto">
      <p class="text-lg font-medium tracking-wide text-primary-400 uppercase">
        {{ .Site.Params.P1.Subheading }}
      </p>
      <h2 class="mt-2 text-3xl font-extrabold tracking-normal text-white sm:text-4xl">
        {{ .Site.Params.P1.Heading }}
      </h2>
      <div class="mt-6 space-y-6">
        {{ range .Site.Params.P1.Content }}
        <p class="text-lg text-gray-900 dark:text-white">
        {{ .text }}
        </p>
        {{ end }}
      </div>
    </div>

    <!-- Upcoming Events section -->
    <div class="relative px-1 pt-8 pb-4 bg-transparent lg:px-8 lg:pt-12 lg:mb-4 md:mt-12">
        <div class="absolute inset-0">
            <div class="h-1/3 bg-gray-200 dark:bg-gray-900/50 sm:h-2/3"></div>
        </div>
        <div class="relative px-2 mx-auto max-w-7xl">
            <div class="text-center">
                <p class="text-lg font-medium tracking-wide text-primary-400 uppercase">
                Join the next event
                </p>
                <h2 class="mt-2 text-3xl font-extrabold tracking-normal text-white sm:text-4xl">
                    Upcoming Events
                </h2>
            </div>

            <div class="mx-auto max-w-7xl text-gray-900 dark:text-gray-50 md:px-1.5">
                <div class="px-4 text-gray-900 dark:text-white not-prose dark:text-zinc-200">
                    <div class="grid gap-4 mx-auto mt-12 mb-4 lg:max-w-none md:grid-cols-3">
                        {{/* Show up to 3 upcoming events sorted by date ascending */}}
                        {{ $now := now }}
                        {{ $upcoming := where (where .Site.RegularPages "Section" "events") ".Date" "ge" $now }}
                        {{ range first 3 (sort $upcoming ".Date" "asc") }}
                            <article class="flex flex-col overflow-hidden rounded-lg shadow-lg bg-white dark:bg-gray-800">
                                {{ $image := .Resources.GetMatch "featured*" }}
                                {{ with $image }}
                                    {{ with .Resize "600x400 webp q85" }}
                                        <img src="{{ .RelPermalink }}" width="{{ .Width }}" height="{{ .Height }}" alt="{{ $.Title }}" class="object-cover w-full h-48" loading="lazy" />
                                    {{ end }}
                                {{ end }}
                                <div class="flex flex-col flex-1 p-6">
                                    <p class="text-sm font-medium text-primary-500 dark:text-primary-300">
                                        {{ .Date.Format "January 2, 2006" }}
                                    </p>
                                    <h3 class="mt-2 text-xl font-semibold text-gray-900 dark:text-white">
                                        <a href="{{ .Permalink }}">{{ .Title }}</a>
                                    </h3>
                                    {{ with .Params.event.location }}
                                        <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">
                                            {{ . }}
                                        </p>
                                    {{ end }}
                                    <p class="mt-3 text-base text-gray-600 dark:text-gray-300">
                                        {{ .Description | truncate 120 }}
                                    </p>
                                </div>
                            </article>
                        {{ end }}
                    </div>
                </div>
            </div>

            <div class="mt-8 mb-4 text-center">
                <a href="{{ "events/" | relURL }}"
                  class="inline-flex items-center px-8 py-3 text-lg font-regular text-white bg-primary-400 rounded-full shadow-md hover:bg-primary-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-primary-400 transition-colors">
                    See all Events
                </a>
            </div>
        </div>
    </div>

    <!-- Become a Speaker section -->
    <div class="relative py-16 bg-gray-900 dark:bg-gray-800">
        <div class="relative px-4 mx-auto max-w-4xl text-center">
            <p class="text-lg font-medium tracking-wide text-primary-400 uppercase">
                Stand out of the crowd
            </p>
            <h2 class="mt-2 text-3xl font-extrabold tracking-normal text-white sm:text-4xl">
                Become a Speaker
            </h2>
            <p class="mx-auto mt-4 max-w-2xl text-xl text-gray-300">
                Share your embedded software expertise with the Austrian community. We're always looking for passionate engineers to present.
            </p>
            <div class="mt-8">
                <a href="{{ "contact/" | relURL }}"
                   class="inline-flex items-center px-8 py-3 text-lg font-regular text-white bg-primary-400 rounded-full shadow-md hover:bg-primary-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-primary-400 transition-colors">
                    Contact Us
                </a>
            </div>
        </div>
    </div>

    {{/* Newsletter signup section */}}
    {{ partial "newsletter.html" . }}
</main>
{{ end }}
